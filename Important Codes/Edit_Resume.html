<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <title>Document</title>
</head>

<body>
    <div id="name">
        <div class="form-group">
            <label for="Name" class="form-label">Name</label>
            <input type="text" class="form-control mb-3" id="Name">
        </div>
        <div class="form-group">
            <label for="Summary" class="form-label">Description</label>
            <input type="text" class="form-control mb-3" id="Summary">
        </div>
    </div>
    <div id="Skills_main_box">
        <h2>Skills</h2>
        <div id="Skills">

        </div>
    </div>
    <div id="Education_main_box">
        <h2>Education</h2>
        <div id="Education">

        </div>
        <button>Add Education</button>
    </div>

    <div id="projects_main_box">
        <h2>Projects</h2>
        <div id="projects">

        </div>
        <button>Add Project</button>
    </div>
    <div id="experience_main_box">
        <h2>Experience</h2>
        <div id="experience">

        </div>
        <button>Add Experience</button>
    </div>
    <script>
        var st = `{
    "success": 1,
    "Name": "Akshay Singh",
    "Summary": "Computer Science enthusiast with some Web and Android Development background, and I \ud83d\udc9e\ufe0f to code.",
    "skills": {
        "language": [
            "C (Programming Language)",
            "C++",
            "Cascading Style Sheets (CSS)",
            "HTML",
            "HTML5",
            "Java",
            "JavaScript",
            "Kotlin"
        ],
        "library_and_framework": [
            "Django",
            "React.js"
        ],
        "other": [
            "Adobe Photoshop",
            "Microsoft Office"
        ]
    },
    "Education": [
        {
            "Degree": "Bachelor of Technology - BTech(2nd year) , Computer Science",
            "College": "Dr. A.P.J. Abdul Kalam Technical University (2020 - 2024)"
        },
        {
            "Degree": "Senior Secondary (XII), Mathematics",
            "College": "Elpis Global School (2018 - 2019)"
        },
        {
            "Degree": "Secondary (X)",
            "College": "Elpis Global School (2016 - 2017)"
        }
    ],
    "Experience": [
        {
            "title": "Software Developer",
            "company": "REACH Technologies",
            "start": "8/2022",
            "end": "Present"
        },
        {
            "title": "Intern",
            "company": "LetsGrowMore",
            "start": "9/2021",
            "end": "9/2021"
        }
    ],
    "Projects": [
        {
            "name": "E_library_using_django",
            "description": "It is a fully responsive, fullend website made using Django that has authentication system. Only logined user can upload books and read premium books."
        },
        {
            "name": "Hosting_E_library_Django_Bootstrap",
            "description": "This project is made using HTML, Python."
        },
        {
            "name": "Notepad_Python_GUI",
            "description": "This project is made using Python."
        },
        {
            "name": "Bouncing_Ball_GUI_Using_C",
            "description": "This project is made using C."
        },
        {
            "name": "Insta_Profile_Downloader_Python_GUI",
            "description": "This project is made using Python."
        },
        {
            "name": "Invoice_system",
            "description": "This project is made using HTML, Python."
        }
    ]
}`
        obj = JSON.parse(st)

        // render form from JSON obj 
        window.onload = function () {
            // name and Summary
            $("#Name").val(obj["Name"]);
            $("#Summary").val(obj["Summary"]);

            // skills
            for (let i in obj["skills"]) {
                let div_ele = `<div id="${i}"></div>`
                document.getElementById("Skills").innerHTML += div_ele;
                // console.log(i)
                let label_ele = `<label class="form-label">${i}</label>`
                document.getElementById(i).innerHTML += label_ele;
                let count = 0;
                for (let x in obj["skills"][i]) {
                    let element = `<input type="text" class="form-control mb-3 ${i}_input" value=${obj["skills"][i][x]}>`
                    document.getElementById(i).innerHTML += element;
                    document.getElementById(i).innerHTML += `<button onclick="delete_skills_input('${i}',${count})">Delete ${i}</button>`
                    ++count;
                    // console.log(element)
                }
                document.getElementById("Skills").innerHTML += `<button onclick="add_skills_input('${i}')">Add ${i}</button>`;
            }
            // Education
            for (let i in obj["Education"]) {
                let div_ele = `<div id="${i}"></div>`
                document.getElementById("Education").innerHTML += div_ele;
                // console.log(i)
                let label_ele = `<div><label class="form-label">${i}</label></div>`
                document.getElementById(i).innerHTML += label_ele;
                // console.log(obj["Education"][i])
                for (let x in obj["Education"][i]) {
                    let label_ele = `<label class="form-label">${x}</label>`
                    document.getElementById(i).innerHTML += label_ele;
                    let t_var = obj["Education"][i][x]
                    let element = `<input type="text" class="form-control mb-3" value="${t_var}" class=${x}>`
                    document.getElementById(i).innerHTML += element;
                    // console.log(element)
                }
            }

            // let obj=JSON.parse(obj)
            projects = obj["Projects"]
            for (var i = 0; i < projects.length; i++) {
                // console.log(projects[i]["description"])
                let project_ele = `<div>
            <input type="text" class="form-control mb-3 project_name" value="${projects[i].name}">
            <input type="text" class="form-control mb-3 project_desc" value="${projects[i].description}">
        </div>`
                document.getElementById("projects").innerHTML += project_ele
            }

            let experience = obj["Experience"]
            // console.log(experience.length)
            for (let i = 0; i < experience.length; i++) {
                div_tag = document.createElement("div")
                estring = `<label for="title-${i + 1}">Title</label><input class="form-control" id="title-${i + 1}">`
                estring += `<label for="company-${i + 1}">Company</label><input class="form-control" id="company-${i + 1}">`
                estring += `<label for="start-${i + 1}">Start</label><input class="form-control" id="start-${i + 1}">`
                estring += `<label for="end-${i + 1}">End</label><input class="form-control" id="end-${i + 1}">`
                div_tag.innerHTML = estring
                document.getElementById("experience").appendChild(div_tag)
                document.getElementById(`title-${i + 1}`).value = experience[i]["title"]
                document.getElementById(`company-${i + 1}`).value = experience[i]["company"]
                document.getElementById(`start-${i + 1}`).value = experience[i]["start"]
                document.getElementById(`end-${i + 1}`).value = experience[i]["end"]
            }
   
        }

        // add skills input box
        function add_skills_input(temp) {    
            let count = document.getElementsByClassName(`${temp}_input`).length;
            // console.log(count)
            document.getElementById(temp).innerHTML += `<input type="text" class="form-control mb-3 ${temp}_input"}>`;
            document.getElementById(temp).innerHTML += `<button onclick="delete_skills_input('${temp}',${count})">Delete ${temp}</button>`
        }
        // to delete skills input box 
        function delete_skills_input(temp, index) {       
            // confirm(temp + String(index));
            let elements = document.getElementsByClassName(`${temp}_input`);
            let t_str = "";
            for(let i=0,count=0;i<elements.length;++i){
                if(i==index){
                    continue;
                }
                t_str += `<input type="text" class="form-control mb-3 ${temp}_input" value=${elements[i].value}>`;
                t_str += `<button onclick="delete_skills_input('${temp}',${count})">Delete ${temp}</button>`
                ++count
            }
            document.getElementById(temp).innerHTML = t_str;
        }

    </script>

    <script src="https://code.jquery.com/jquery-3.6.1.slim.js"
        integrity="sha256-tXm+sa1uzsbFnbXt8GJqsgi2Tw+m4BLGDof6eUPjbtk=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
        crossorigin="anonymous"></script>
</body>

</html>